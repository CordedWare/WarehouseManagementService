<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Employees</title>
</head>
<body>
<form th:action="@{employees}"  th:object="${employee}" method="post">
    <label for="create_username">Username:
        <input id="create_username" type="text" name="username" th:field="*{user.username}">
    </label>

    <label for="create_email">Email:
        <input id="create_email" type="text" name="email" th:field="*{user.email}">
    </label>

    <label for="create_firstname">Имя:
        <input id="create_firstname" type="text" name="firstname">
    </label>

    <label for="create_lastname">Фамилия:
        <input id="create_lastname" type="text" name="lastname">
    </label>

    <label for="create_password">Создайте пароль:
        <input id="create_password" type="password" name="password" th:field="*{user.password}">
    </label>

    <button id="saveButtonEmployee" type="submit">Зарегистрировать работника</button>
</form>

<button onclick="activateTable()">Показать всех работников</button>

<table id="saveTableEmployee" style="display: none">
    <tr th:if="${#lists.isEmpty(employees)}">
        <td colspan="2">
            Список работников пуст
        </td>
    </tr>
    <tr  th:if="${not #lists.isEmpty(employees)}">
        <td th:text="${employees[employees.size() - 1].getUser().username}">username зарегистрированн</td>
    </tr>
</table>

<table id="showTable" style="display: none; border-spacing: 60px;">
    <tr>
        <th>Имя: </th>
        <th>Фамилия: </th>
        <th>Отчество: </th>
    </tr>
    <tr th:each="employee_ : ${employees}">
        <td th:text="${employee_.getFirstname()}">firstname</td>
        <td th:text="${employee_.getLastname()}">lastname</td>
        <td th:text="${employee_.getPatronymic()}">patronymic</td>
    </tr>
</table>


<script>
    function activateTable() {
        var table = document.getElementById("showTable");
        if(table.style.display === "none") {
            table.style.display = "table";
        } else {
            table.style.display = "none";
        }
    }

    document.addEventListener("DOMContentLoaded", function () {
        var saveTable = document.getElementById("saveTableEmployee");
        var saveButton = document.getElementById("saveButtonEmployee");

        setTimeout(function() {
            saveTable.style.display = "none";
        }, 5000);
    });
</script>

</body>
</html>